# start-ngrok.ps1 ? ????????? ngrok http 3000
# ?????????: ????????????? ngrok ? ??????????? authtoken

param(
  [int]$Port = 3000
)

# ??????? ????? ngrok ? PATH
$ngrok = (Get-Command ngrok -ErrorAction SilentlyContinue)?.Source

# ???? ? PATH ??? ? ???? ????? ? ???????? (ngrok.exe ? ??? ?? ?????)
if (-not $ngrok) {
    $candidate = Join-Path $PSScriptRoot "ngrok.exe"
    if (Test-Path $candidate) { $ngrok = $candidate }
}

if (-not $ngrok) {
    Write-Host "ngrok not found. Try one of:"
    Write-Host "  1) winget install --id ngrok.ngrok -e"
    Write-Host "  2) Place ngrok.exe next to this script: $($PSScriptRoot)"
    exit 1
}

Write-Host "Using ngrok: $ngrok"
& $ngrok http $Port
