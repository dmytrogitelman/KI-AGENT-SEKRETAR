# KI AGENT SEKRETAR — Шпаргалка по программам и сервисам

Коротко о каждом инструменте, который используется в проекте.

## Локальная разработка
- **Node.js / npm** — платформа и пакетный менеджер для запуска TypeScript/JS кода.
- **TypeScript** — надстройка над JS с типами; делает код надёжнее.
- **tsx** — быстрый dev-раннер для TypeScript (запускает TS без ручной компиляции).
- **VS Code** — редактор кода (удобные плагины для TS/Node).
- **Git** — контроль версий (опционально для сохранения истории проекта).

## Контейнеры и инфраструктура
- **Docker Desktop / Docker Engine** — запуск сервисов в контейнерах.
- **PostgreSQL** — реляционная база данных (хранит пользователей, токены, настройки).
- **Redis** — кеш и/или очереди (сессии, rate-limit, фоновые задачи).
- **Prisma ORM** — связь кода с базой (миграции, типы, генерация клиента).
- **dotenv** — загрузка переменных окружения из файла `.env`.
- **Zod** — валидация конфигурации `.env` и других данных.
- **pino** — быстрый структурированный логгер.
- **Vitest / supertest** — тестирование (юнит и интеграция).

## Туннелирование и вебхуки
- **ngrok** — пробрасывает локальный сервер в интернет (нужен для Twilio вебхуков).
  - Web UI: `http://127.0.0.1:4040` — посмотреть запросы и ответы.

## Интеграции и ИИ
- **Twilio WhatsApp API** — приём и отправка сообщений/медиа в WhatsApp (Sandbox для теста).
- **OpenAI API (GPT-4o-mini)** — «мозг» агента: понимает текст, планирует, генерирует ответы.
- **OpenAI Whisper (STT)** — распознаёт голосовые сообщения в текст.
- **ElevenLabs (TTS)** — озвучка ответа голосом (Text-to-Speech).
- **Zoom API** — создание встреч и ссылок на видеозвонки.
- **Google Cloud APIs** — Google Calendar, Gmail (OAuth-авторизация).
- **Microsoft Graph** — Outlook Calendar/Mail, Teams (OAuth-авторизация).
- **Notion / Todoist API** — задачи, заметки, хранение материалов (по желанию).

## Клиентские библиотеки (Node.js)
- **googleapis / google-auth-library** — клиент для Google API.
- **@microsoft/microsoft-graph-client / @azure/identity** — доступ к Microsoft Graph.
- **twilio** — отправка сообщений/медиа в WhatsApp из кода.
- **ioredis** — клиент для Redis.
- **axios / node-fetch** — HTTP-клиенты (вызовы внешних API).

## Что за что отвечает в проекте (логика)
- **Webhook (Express/Fastify)** — принимает входящие сообщения от Twilio.
- **Whisper STT** — превращает аудио в текст.
- **Language detect & i18n** — определяет язык, переводит при необходимости.
- **Intent/Planner/Orchestrator** — понимает, что хочет пользователь, выбирает нужные инструменты, объединяет результат.
- **Adapters (calendar/email/tasks/notes/zoom)** — слой интеграций с внешними сервисами.
- **TTS** — озвучивает готовый ответ и отсылает аудио в WhatsApp.
- **DB/Redis** — хранение пользователей, предпочтений, истории, кешей.

## Где смотреть ошибки
- **Окно `npm run dev`** — логи приложения.
- **Twilio Console → Logs → Messaging** — доставлены ли вебхуки (ищи 200 OK).
- **ngrok `http://127.0.0.1:4040`** — последние запросы к твоему локальному серверу.
- **Docker logs** — `docker logs pg` (Postgres), `docker logs redis` (Redis).
- **Prisma** — сообщения при `npx prisma migrate dev` и `npx prisma generate`.

## Безопасность (кратко)
- Ключи в `.env` — не публиковать. Утёкшие ключи — немедленно ротировать.
- Ограничивай права у ключей (например, ElevenLabs — только Text to Speech).
- Держи разные ключи для dev и prod.
